#Flags

CFLAGS =  
CPPFLAGS = 
LDFLAGS =-lpcap -lssl

.PHONY : clean help

raw_socket: raw_socket.o
	$(CC) ${CFLAGS} -o $@ $^

raw_socket.o : raw_socket.c
	$(CC) ${CFLAGS} -c $<  

sniff : sniff.o
	$(CC) ${CFLAGS} -o $@ $^ ${LDFLAGS}

sniff.o : sniff.c sniff.h
	$(CC) ${CFLAGS} -c $<

Client: Client.o Attack.o
	$(CC) ${CFLAGS} -o $@ $^  ${LDFLAGS} `pkg-config openssl --libs`

Client.o: Client.c Attack.h
	$(CC) ${CFLAGS} -c $< `pkg-config openssl --cflags`

Server: Server.o Attack.o
	$(CC) ${CFLAGS} -o $@ $^   `pkg-config openssl --libs`

Server.o: Server.c Attack.h
	$(CC) ${CFLAGS} -c $< `pkg-config openssl --cflags`

Attack : Attack.o
	$(CC) ${CFLAGS} -o $@ $^  `pkg-config openssl --libs`

Attack.o : Attack.c Attack.h
	$(CC) ${CFLAGS} -c $<  `pkg-config openssl --cflags`

clean:
	@rm -rf *.o $(EXE) *~

help :
	@echo -e "OPTION :"
	@echo -e "make clean : Remove all files generated by compilation"
	@echo -e "make help : Display the help"
